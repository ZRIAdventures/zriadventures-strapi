{
  "kind": "collectionType",
  "collectionName": "tour_bookings",
  "info": {
    "singularName": "tour-booking",
    "pluralName": "tour-bookings",
    "displayName": "Tour Booking",
    "description": "Tour booking records with price snapshots (never recalculate prices after booking)"
  },
  "options": {
    "draftAndPublish": true
  },
  "pluginOptions": {},
  "attributes": {
    "tour": {
      "type": "relation",
      "relation": "manyToOne",
      "target": "api::tour.tour"
    },
    "departure": {
      "type": "relation",
      "relation": "manyToOne",
      "target": "api::group-tour-departure.group-tour-departure",
      "description": "Null for private tours, required for group tours"
    },
    "tourType": {
      "type": "enumeration",
      "required": true,
      "enum": [
        "private",
        "group"
      ]
    },
    "startDate": {
      "type": "date",
      "required": true
    },
    "endDate": {
      "type": "date",
      "required": true
    },
    "adults": {
      "type": "integer",
      "required": true,
      "min": 0
    },
    "children": {
      "type": "integer",
      "default": 0,
      "min": 0
    },
    "totalPax": {
      "type": "integer",
      "required": true,
      "min": 1
    },
    "accommodationType": {
      "type": "enumeration",
      "enum": [
        "not_required",
        "star_3",
        "star_4",
        "star_5"
      ]
    },
    "roomCount": {
      "type": "integer"
    },
    "specialRequests": {
      "type": "text"
    },
    "accommodationAmount": {
      "type": "decimal",
      "default": 0
    },
    "discount": {
      "type": "decimal",
      "default": 0
    },
    "totalAmount": {
      "type": "decimal",
      "required": true
    },
    "bookingStatus": {
      "type": "enumeration",
      "default": "pending",
      "enum": [
        "pending",
        "confirmed",
        "cancelled"
      ]
    },
    "paymentStatus": {
      "type": "enumeration",
      "default": "unpaid",
      "enum": [
        "unpaid",
        "paid",
        "refunded"
      ]
    },
    "internalNotes": {
      "type": "text"
    },
    "bookingReference": {
      "type": "uid"
    },
    "orderRef": {
      "type": "relation",
      "relation": "manyToOne",
      "target": "api::v2-order.v2-order",
      "inversedBy": "tour_booking"
    }
  }
}
